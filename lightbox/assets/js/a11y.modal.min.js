!function(t,a,e){"use strict";var r={};r.NS="A11yModal",r.AUTHOR="Scott O'Hara",r.VERION="2.3.2",r.DOCUMENTATION="https://github.com/scottaohara/accessible_modal_window",r.LICENSE="https://github.com/scottaohara/accessible_modal_window/blob/master/LICENSE";var i='[data-action="modal-open"]',o=".a11y-modal",n="modal",d="."+n,l="[data-modal-title]",s="[data-modal-close]",c="data-add-style",h="modal-is-open",u='<button type="button" data-modal-close class="modal__outro__close"><svg role="presentation" viewBox="0 0 20 20" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M10.707 10.5l8.646-8.646a.5.5 0 0 0-.707-.707L10 9.793 1.354 1.147a.5.5 0 0 0-.707.707L9.293 10.5.647 19.146a.5.5 0 0 0 .708.707l8.646-8.646 8.646 8.646a.498.498 0 0 0 .708 0 .5.5 0 0 0 0-.707L10.709 10.5z"/></svg></button>',f=t("html"),b="a11y_body_wrap",g="default",m="Dialog Window",p=null;t.fn.extend({a11yModal:function(a){return this.each(function(){"default"!==g&&(b=g);var a=this.id,e=t("#"+a),r=function(){e.each(function(){var a,r=t(this),i=r.find(l),o=r.find(":header");"true"===r.attr("data-modal-alert")?r.attr({role:"alertdialog"}):r.attr({role:"dialog"}),r.attr("aria-modal","true"),r.find(d).attr("tabindex","-1"),e[0].hasAttribute("aria-label")||(i.length?a=i.attr("id"):o.length&&(o.first().attr("id")?a=o.first().attr("id"):(a=r.attr("id")+"_title",o.first().attr("id",a))),r.attr("aria-labelledby",a))}),e.find(d).each(function(){var a=t(this);a.attr({role:"document"}),a.find(s).length||(a.find(".modal__outro").length?a.find(".modal__outro").append(u):a.append(u)),a.find(s).attr({"aria-label":"Close Modal"})})},v=function(){t(i).each(function(){var a,e,r=t(this);if(r.attr("href")&&r.attr("role","button"),r.attr("aria-haspopup","dialog"),!r.attr("aria-controls"))if(r.attr("data-modal-open"))a=r.attr("data-modal-open"),r.attr("aria-controls",a);else{if(!r.attr("href"))return console.log("No target set. A target is set by setting the value of an aria-controls attribute, which if absent, can be generated by the trigger's href URI, or a data-modal-open attribute to the value of the modal window ID you are attempting to open."),!1;a=r.attr("href").split("#")[1],r.attr("aria-controls",a)}e=t("#"+r.attr("aria-controls")),"true"===r.attr("data-modal-alert")&&"alertdialog"!==e.attr("role")&&e.attr("role","alertdialog")})},w=function(){var a=t("body"),e='<div id="'+b+'" />';"default"===g&&t("body > *").wrapAll(e),a.prepend(t(o))},y=function(a){var e=t(this),r=t("#"+e.attr("aria-controls"));if(a.preventDefault(),e[0].hasAttribute(c)){var i=t(this).attr(c);r.find(d).attr("class",n+" "+i)}return e.parents("."+n).length&&(e.closest(o).attr("aria-hidden","true"),p=e.closest(o).attr("id")),r[0].hasAttribute("aria-labelledby")||r[0].hasAttribute("aria-label")||(e[0].hasAttribute("data-set-modal-title")&&(m=e.attr("data-set-modal-title")),r.attr("aria-label",m)),r.attr("aria-hidden","false"),f.addClass(h),N(r),t("#"+b)[0].hasAttribute("aria-hidden")||t("#"+b).attr("aria-hidden","true"),r.find(d).focus(),p},_=function(a){var r=t('[aria-controls="'+e.attr("id")+'"]');a.preventDefault(),e.attr("aria-hidden","true"),null!==p?(t("#"+p).attr("aria-hidden","false"),t("#"+p).find(d).focus(),p=null):(f.removeClass(h),t("body").find("#"+b).removeAttr("aria-hidden"),r.focus())},A=function(t){t.target===e.find(d).parent().get(0)&&_(t)},k=function(a){var e=a.keyCode||a.which;switch(e){case 32:case 13:a.stopPropagation(),t(this).trigger("click")}},C=function(a){var r=a.keyCode||a.which;if(f.hasClass(h))switch(r){case 9:!a.shiftKey&&e.find(s).is(":focus")&&t(d).focus();break;case 27:_(a);break;case 32:case 13:e.find(s).is(":focus")&&(a.stopPropagation(),_(a))}},N=function(a){var e=a.find(d),r=a.find(s);t(document).on("focusin."+a,function(t){e[0]===t.target||e.has(t.target).length||r.focus()})};w(),r(),v(),e.on("keydown",C.bind(this)),e.on("click touchstart",A.bind(this)),e.find(s).on("click",_.bind(this)),t(document).on("click",i,y),t(document).on("keydown",i,k)})}}),t(o).a11yModal()}(jQuery,this,this.document);
